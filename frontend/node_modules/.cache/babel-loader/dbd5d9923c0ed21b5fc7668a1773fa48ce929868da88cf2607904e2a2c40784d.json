{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{AuthContext}from'../../context/AuthContext';import UploadGameForm from'../UploadGameForm/UploadGameForm';import EditGameForm from'../EditGameForm/EditGameForm';import styles from'./Dashboard.module.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){const{auth}=useContext(AuthContext);const[games,setGames]=useState([]);const[loading,setLoading]=useState(true);const[showUploadForm,setShowUploadForm]=useState(false);const[editingGame,setEditingGame]=useState(null);const fetchGames=async()=>{if(!(auth!==null&&auth!==void 0&&auth.token))return;try{const res=await fetch('http://localhost:5000/games/me',{headers:{Authorization:`Bearer ${auth.token}`}});if(!res.ok)throw new Error('Erro ao buscar jogos');const data=await res.json();setGames(data);}catch(err){console.error(err);}finally{setLoading(false);}};useEffect(()=>{fetchGames();},[auth]);// Atualiza os jogos sempre que o usuÃ¡rio mudar\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.dashboardContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Painel do Desenvolvedor \\uD83C\\uDFAE\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUploadForm(true),className:styles.uploadButton,children:\"Enviar Novo Jogo\"}),showUploadForm&&/*#__PURE__*/_jsx(UploadGameForm,{auth:auth,onClose:()=>setShowUploadForm(false),onUploaded:fetchGames}),editingGame&&/*#__PURE__*/_jsx(EditGameForm,{auth:auth,game:editingGame,onClose:()=>setEditingGame(null),onUpdated:fetchGames}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Carregando dados...\"}):games.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Voc\\xEA ainda n\\xE3o publicou nenhum jogo.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Seus Jogos Publicados\"}),/*#__PURE__*/_jsxs(\"table\",{className:styles.gameTable,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Imagem\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Jogo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pre\\xE7o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vendas\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Receita Bruta\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Receita L\\xEDquida\"}),/*#__PURE__*/_jsx(\"th\",{children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:games.map(game=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${game.imageUrl}`,alt:game.title,style:{width:'100px'}})}),/*#__PURE__*/_jsx(\"td\",{children:game.title}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",game.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:game.sales||0}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",(game.price*(game.sales||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",(game.price*(game.sales||0)*0.9).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingGame(game),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>console.log(`Excluir ${game._id}`),children:\"Excluir\"})]})]},game._id))})]})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","UploadGameForm","EditGameForm","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","auth","games","setGames","loading","setLoading","showUploadForm","setShowUploadForm","editingGame","setEditingGame","fetchGames","token","res","fetch","headers","Authorization","ok","Error","data","json","err","console","error","className","dashboardContainer","children","onClick","uploadButton","onClose","onUploaded","game","onUpdated","length","gameTable","map","src","imageUrl","alt","title","style","width","price","toFixed","sales","log","_id"],"sources":["C:/gamehive-tailwind/gamehive-tailwind/frontend/src/components/Dashboard/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport UploadGameForm from '../UploadGameForm/UploadGameForm';\r\nimport EditGameForm from '../EditGameForm/EditGameForm';\r\nimport styles from './Dashboard.module.css';\r\n\r\nfunction Dashboard() {\r\n  const { auth } = useContext(AuthContext);\r\n  const [games, setGames] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showUploadForm, setShowUploadForm] = useState(false);\r\n  const [editingGame, setEditingGame] = useState(null);\r\n\r\n  const fetchGames = async () => {\r\n    if (!auth?.token) return;\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/games/me', {\r\n        headers: { Authorization: `Bearer ${auth.token}` },\r\n      });\r\n\r\n      if (!res.ok) throw new Error('Erro ao buscar jogos');\r\n\r\n      const data = await res.json();\r\n      setGames(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchGames();\r\n  }, [auth]); // Atualiza os jogos sempre que o usuÃ¡rio mudar\r\n\r\n  return (\r\n    <div className={styles.dashboardContainer}>\r\n      <h2>Painel do Desenvolvedor ðŸŽ®</h2>\r\n\r\n      <button onClick={() => setShowUploadForm(true)} className={styles.uploadButton}>\r\n        Enviar Novo Jogo\r\n      </button>\r\n\r\n      {showUploadForm && (\r\n        <UploadGameForm\r\n          auth={auth}\r\n          onClose={() => setShowUploadForm(false)}\r\n          onUploaded={fetchGames}\r\n        />\r\n      )}\r\n\r\n      {editingGame && (\r\n        <EditGameForm\r\n          auth={auth}\r\n          game={editingGame}\r\n          onClose={() => setEditingGame(null)}\r\n          onUpdated={fetchGames}\r\n        />\r\n      )}\r\n\r\n      {loading ? (\r\n        <p>Carregando dados...</p>\r\n      ) : games.length === 0 ? (\r\n        <p>VocÃª ainda nÃ£o publicou nenhum jogo.</p>\r\n      ) : (\r\n        <>\r\n          <h3>Seus Jogos Publicados</h3>\r\n          <table className={styles.gameTable}>\r\n            <thead>\r\n              <tr>\r\n                <th>Imagem</th>\r\n                <th>Jogo</th>\r\n                <th>PreÃ§o</th>\r\n                <th>Vendas</th>\r\n                <th>Receita Bruta</th>\r\n                <th>Receita LÃ­quida</th>\r\n                <th>AÃ§Ãµes</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {games.map((game) => (\r\n                <tr key={game._id}>\r\n                  <td><img src={`http://localhost:5000${game.imageUrl}`} alt={game.title} style={{ width: '100px' }} /></td>\r\n                  <td>{game.title}</td>\r\n                  <td>R$ {game.price.toFixed(2)}</td>\r\n                  <td>{game.sales || 0}</td>\r\n                  <td>R$ {(game.price * (game.sales || 0)).toFixed(2)}</td>\r\n                  <td>R$ {(game.price * (game.sales || 0) * 0.9).toFixed(2)}</td>\r\n                  <td>\r\n                    <button onClick={() => setEditingGame(game)}>Editar</button>\r\n                    <button onClick={() => console.log(`Excluir ${game._id}`)}>Excluir</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}